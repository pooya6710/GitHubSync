import os
import telebot
import logging

# ØªÙ†Ø¸ÛŒÙ… Ù„Ø§Ú¯
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

# Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø§Ø² Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ
TOKEN = os.environ.get('TELEGRAM_BOT_TOKEN')
if not TOKEN:
    logger.error("No TELEGRAM_BOT_TOKEN found in environment variables!")
    exit(1)

# Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÙˆÙ†Ù‡ Ø±Ø¨Ø§Øª
bot = telebot.TeleBot(TOKEN)

@bot.message_handler(commands=['start', 'help'])
def handle_start_help(message):
    """Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø¯Ø³ØªÙˆØ± /start Ùˆ /help"""
    bot.reply_to(message, 
                "ğŸ‘‹ Ø³Ù„Ø§Ù…! Ù…Ù† Ø±Ø¨Ø§Øª Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙˆÛŒØ¯ÛŒÙˆ Ù‡Ø³ØªÙ….\n"
                "Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ ÛŒÙˆØªÛŒÙˆØ¨ Ùˆ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ø±Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†Ù….\n"
                "Ú©Ø§ÙÛŒØ³Øª Ù„ÛŒÙ†Ú© ÙˆÛŒØ¯ÛŒÙˆ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ù† Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.")

@bot.message_handler(commands=['status'])
def handle_status(message):
    """Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆØ±"""
    bot.reply_to(message, "âœ… Ø±Ø¨Ø§Øª ÙØ¹Ø§Ù„ Ø§Ø³Øª Ùˆ Ø¯Ø± Ø­Ø§Ù„ Ú©Ø§Ø± Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.")

@bot.message_handler(func=lambda message: True)
def handle_message(message):
    """Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù‡Ù…Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§"""
    if "youtube.com" in message.text or "youtu.be" in message.text:
        bot.reply_to(message, "ğŸ¬ Ù„ÛŒÙ†Ú© ÛŒÙˆØªÛŒÙˆØ¨ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯. Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...")
    elif "instagram.com" in message.text:
        bot.reply_to(message, "ğŸ“¸ Ù„ÛŒÙ†Ú© Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯. Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...")
    else:
        bot.reply_to(message, "âŒ Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù„ÛŒÙ†Ú© Ù…Ø¹ØªØ¨Ø± Ø§Ø² ÛŒÙˆØªÛŒÙˆØ¨ ÛŒØ§ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.")

def main():
    """ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª"""
    logger.info("Starting the Telegram bot...")
    bot.polling(none_stop=True)

if __name__ == "__main__":
    main()